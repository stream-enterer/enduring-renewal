{
  "version": 1,
  "description": "LLM-generated oracle tests for Slice & Dice keyword verification",
  "generated_by": "claude-opus-4-5-20250114",
  "tests": [
    {"id": "engage_triggers", "keywords": ["ENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "expected_value": 20, "reasoning": "target at full hp, ENGAGE triggers x2"},
    {"id": "engage_no_trigger", "keywords": ["ENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "target not at full hp, ENGAGE does not trigger"},
    {"id": "pristine_triggers", "keywords": ["PRISTINE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "source at full hp, PRISTINE triggers x2"},
    {"id": "pristine_no_trigger", "keywords": ["PRISTINE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 15, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "source not at full hp, PRISTINE does not trigger"},
    {"id": "cruel_triggers", "keywords": ["CRUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 5, "max_hp": 10}, "expected_value": 20, "reasoning": "target at 50% hp (half or less), CRUEL triggers x2"},
    {"id": "cruel_no_trigger", "keywords": ["CRUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 6, "max_hp": 10}, "expected_value": 10, "reasoning": "target at 60% hp (above half), CRUEL does not trigger"},
    {"id": "deathwish_triggers", "keywords": ["DEATHWISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 1, "max_hp": 20, "dying": true}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "source is dying this turn, DEATHWISH triggers x2"},
    {"id": "deathwish_no_trigger", "keywords": ["DEATHWISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 10, "max_hp": 20, "dying": false}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "source not dying, DEATHWISH does not trigger"},
    {"id": "armoured_triggers", "keywords": ["ARMOURED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 3}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "source has shields, ARMOURED triggers x2"},
    {"id": "armoured_no_trigger", "keywords": ["ARMOURED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 0}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "source has no shields, ARMOURED does not trigger"},
    {"id": "moxie_triggers", "keywords": ["MOXIE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 3, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"all_entities_hp": [3, 10, 15, 12]}, "expected_value": 20, "reasoning": "source has least hp of all, MOXIE triggers x2"},
    {"id": "moxie_no_trigger", "keywords": ["MOXIE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 10, "max_hp": 20}, "target": {"hp": 5, "max_hp": 15}, "context": {"all_entities_hp": [10, 5, 15, 12]}, "expected_value": 10, "reasoning": "source does not have least hp, MOXIE does not trigger"},
    {"id": "bully_triggers", "keywords": ["BULLY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"all_entities_hp": [20, 10, 15, 12]}, "expected_value": 20, "reasoning": "source has most hp of all, BULLY triggers x2"},
    {"id": "bully_no_trigger", "keywords": ["BULLY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 10, "max_hp": 20}, "target": {"hp": 5, "max_hp": 15}, "context": {"all_entities_hp": [10, 5, 25, 12]}, "expected_value": 10, "reasoning": "source does not have most hp, BULLY does not trigger"},
    {"id": "wham_triggers", "keywords": ["WHAM"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "shields": 5}, "expected_value": 20, "reasoning": "target has shields, WHAM triggers x2"},
    {"id": "wham_no_trigger", "keywords": ["WHAM"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "shields": 0}, "expected_value": 10, "reasoning": "target has no shields, WHAM does not trigger"},
    {"id": "squish_triggers", "keywords": ["SQUISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 3, "max_hp": 15}, "context": {"all_entities_hp": [20, 3, 10, 12]}, "expected_value": 20, "reasoning": "target has least hp of all, SQUISH triggers x2"},
    {"id": "squish_no_trigger", "keywords": ["SQUISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"all_entities_hp": [20, 3, 10, 12]}, "expected_value": 10, "reasoning": "target does not have least hp, SQUISH does not trigger"},
    {"id": "uppercut_triggers", "keywords": ["UPPERCUT"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 25, "max_hp": 30}, "context": {"all_entities_hp": [20, 25, 10, 12]}, "expected_value": 20, "reasoning": "target has most hp of all, UPPERCUT triggers x2"},
    {"id": "uppercut_no_trigger", "keywords": ["UPPERCUT"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"all_entities_hp": [20, 25, 10, 12]}, "expected_value": 10, "reasoning": "target does not have most hp, UPPERCUT does not trigger"},
    {"id": "terminal_triggers", "keywords": ["TERMINAL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 1, "max_hp": 15}, "expected_value": 20, "reasoning": "target at 1 hp, TERMINAL triggers x2"},
    {"id": "terminal_no_trigger", "keywords": ["TERMINAL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 2, "max_hp": 15}, "expected_value": 10, "reasoning": "target not at 1 hp, TERMINAL does not trigger"},
    {"id": "reborn_triggers", "keywords": ["REBORN"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "died_this_fight": true}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "source died this fight, REBORN triggers x2"},
    {"id": "reborn_no_trigger", "keywords": ["REBORN"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "died_this_fight": false}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "source has not died this fight, REBORN does not trigger"},
    {"id": "century_triggers", "keywords": ["CENTURY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 150, "max_hp": 200}, "expected_value": 20, "reasoning": "target has 100+ hp, CENTURY triggers x2"},
    {"id": "century_no_trigger", "keywords": ["CENTURY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 50, "max_hp": 80}, "expected_value": 10, "reasoning": "target has less than 100 hp, CENTURY does not trigger"},
    {"id": "serrated_triggers", "keywords": ["SERRATED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "shields_gained_this_turn": 0}, "expected_value": 20, "reasoning": "target gained no shields this turn, SERRATED triggers x2"},
    {"id": "serrated_no_trigger", "keywords": ["SERRATED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "shields_gained_this_turn": 3}, "expected_value": 10, "reasoning": "target gained shields this turn, SERRATED does not trigger"},
    {"id": "first_triggers", "keywords": ["FIRST"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"dice_used_this_turn": 0}, "expected_value": 20, "reasoning": "no dice used this turn, FIRST triggers x2"},
    {"id": "first_no_trigger", "keywords": ["FIRST"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"dice_used_this_turn": 1}, "expected_value": 10, "reasoning": "dice already used this turn, FIRST does not trigger"},
    {"id": "sixth_triggers", "keywords": ["SIXTH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"dice_used_this_turn": 5}, "expected_value": 20, "reasoning": "this is the 6th dice used this turn, SIXTH triggers x2"},
    {"id": "sixth_no_trigger", "keywords": ["SIXTH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"dice_used_this_turn": 3}, "expected_value": 10, "reasoning": "this is not the 6th dice, SIXTH does not trigger"},
    {"id": "patient_triggers", "keywords": ["PATIENT"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "used_last_turn": false}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "source was not used last turn, PATIENT triggers x2"},
    {"id": "patient_no_trigger", "keywords": ["PATIENT"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "used_last_turn": true}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "source was used last turn, PATIENT does not trigger"},
    {"id": "sloth_triggers", "keywords": ["SLOTH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "blank_sides": 3}, "target": {"hp": 10, "max_hp": 15, "blank_sides": 1}, "expected_value": 20, "reasoning": "target has fewer blank sides (1) than source (3), SLOTH triggers x2"},
    {"id": "sloth_no_trigger", "keywords": ["SLOTH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "blank_sides": 1}, "target": {"hp": 10, "max_hp": 15, "blank_sides": 3}, "expected_value": 10, "reasoning": "target has more blank sides (3) than source (1), SLOTH does not trigger"},
    {"id": "tall_triggers", "keywords": ["TALL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "is_topmost": true}, "expected_value": 20, "reasoning": "target is topmost, TALL triggers x2"},
    {"id": "tall_no_trigger", "keywords": ["TALL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "is_topmost": false}, "expected_value": 10, "reasoning": "target is not topmost, TALL does not trigger"},
    {"id": "ego_triggers", "keywords": ["EGO"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": "SELF", "expected_value": 20, "reasoning": "target is self, EGO triggers x2"},
    {"id": "ego_no_trigger", "keywords": ["EGO"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "target is not self, EGO does not trigger"},
    {"id": "underdog_triggers", "keywords": ["UNDERDOG"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 10, "max_hp": 20}, "target": {"hp": 15, "max_hp": 20}, "expected_value": 20, "reasoning": "target has more hp than source, UNDERDOG triggers x2"},
    {"id": "underdog_no_trigger", "keywords": ["UNDERDOG"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 15, "max_hp": 20}, "target": {"hp": 10, "max_hp": 20}, "expected_value": 10, "reasoning": "target has less hp than source, UNDERDOG does not trigger"},
    {"id": "overdog_triggers", "keywords": ["OVERDOG"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 15, "max_hp": 20}, "target": {"hp": 10, "max_hp": 20}, "expected_value": 20, "reasoning": "target has less hp than source, OVERDOG triggers x2"},
    {"id": "overdog_no_trigger", "keywords": ["OVERDOG"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 10, "max_hp": 20}, "target": {"hp": 15, "max_hp": 20}, "expected_value": 10, "reasoning": "target has more hp than source, OVERDOG does not trigger"},
    {"id": "dog_triggers", "keywords": ["DOG"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 12, "max_hp": 20}, "target": {"hp": 12, "max_hp": 20}, "expected_value": 20, "reasoning": "target has equal hp to source, DOG triggers x2"},
    {"id": "dog_no_trigger", "keywords": ["DOG"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 12, "max_hp": 20}, "target": {"hp": 10, "max_hp": 20}, "expected_value": 10, "reasoning": "target has different hp from source, DOG does not trigger"},
    {"id": "hyena_triggers", "keywords": ["HYENA"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 7, "max_hp": 20}, "target": {"hp": 11, "max_hp": 20}, "expected_value": 20, "reasoning": "7 and 11 are co-prime (gcd=1), HYENA triggers x2"},
    {"id": "hyena_no_trigger", "keywords": ["HYENA"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 6, "max_hp": 20}, "target": {"hp": 9, "max_hp": 20}, "expected_value": 10, "reasoning": "6 and 9 share factor 3 (not co-prime), HYENA does not trigger"},
    {"id": "antiEngage_triggers", "keywords": ["ANTIENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "target not at full hp, ANTIENGAGE triggers x2"},
    {"id": "antiEngage_no_trigger", "keywords": ["ANTIENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "expected_value": 10, "reasoning": "target at full hp, ANTIENGAGE does not trigger"},
    {"id": "antiPristine_triggers", "keywords": ["ANTIPRISTINE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 15, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "source not at full hp, ANTIPRISTINE triggers x2"},
    {"id": "antiPristine_no_trigger", "keywords": ["ANTIPRISTINE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "source at full hp, ANTIPRISTINE does not trigger"},
    {"id": "antiDeathwish_triggers", "keywords": ["ANTIDEATHWISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 10, "max_hp": 20, "dying": false}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "source not dying, ANTIDEATHWISH triggers x2"},
    {"id": "antiDeathwish_no_trigger", "keywords": ["ANTIDEATHWISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 1, "max_hp": 20, "dying": true}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "source is dying, ANTIDEATHWISH does not trigger"},
    {"id": "antiDog_triggers", "keywords": ["ANTIDOG"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 12, "max_hp": 20}, "target": {"hp": 10, "max_hp": 20}, "expected_value": 20, "reasoning": "target has different hp from source, ANTIDOG triggers x2"},
    {"id": "antiDog_no_trigger", "keywords": ["ANTIDOG"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 12, "max_hp": 20}, "target": {"hp": 12, "max_hp": 20}, "expected_value": 10, "reasoning": "target has equal hp to source, ANTIDOG does not trigger"},
    {"id": "antiPair_triggers", "keywords": ["ANTIPAIR"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 5}, "expected_value": 20, "reasoning": "this die (10) has different pips than previous (5), ANTIPAIR triggers x2"},
    {"id": "antiPair_no_trigger", "keywords": ["ANTIPAIR"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 10}, "expected_value": 10, "reasoning": "this die (10) has same pips as previous (10), ANTIPAIR does not trigger"},
    {"id": "pair_triggers", "keywords": ["PAIR"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 10}, "expected_value": 20, "reasoning": "this die (10) has same value as previous (10), PAIR triggers x2"},
    {"id": "pair_no_trigger", "keywords": ["PAIR"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 5}, "expected_value": 10, "reasoning": "this die (10) has different value from previous (5), PAIR does not trigger"},
    {"id": "trio_triggers", "keywords": ["TRIO"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_values": [10, 10]}, "expected_value": 30, "reasoning": "this die (10) matches 2 previous dice (10, 10), TRIO triggers x3"},
    {"id": "trio_no_trigger", "keywords": ["TRIO"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_values": [10, 5]}, "expected_value": 10, "reasoning": "previous dice don't all match (10, 5), TRIO does not trigger"},
    {"id": "quin_triggers", "keywords": ["QUIN"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_values": [10, 10, 10, 10]}, "expected_value": 50, "reasoning": "this die (10) matches 4 previous dice, QUIN triggers x5"},
    {"id": "sept_triggers", "keywords": ["SEPT"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_values": [10, 10, 10, 10, 10, 10]}, "expected_value": 70, "reasoning": "this die (10) matches 6 previous dice, SEPT triggers x7"},
    {"id": "chain_triggers", "keywords": ["CHAIN", "ENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_keywords": ["ENGAGE"]}, "expected_value": 20, "reasoning": "shares ENGAGE keyword with previous die, CHAIN triggers x2"},
    {"id": "chain_no_trigger", "keywords": ["CHAIN", "CRUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_keywords": ["ENGAGE"]}, "expected_value": 10, "reasoning": "no shared keywords with previous die, CHAIN does not trigger"},
    {"id": "step_triggers", "keywords": ["STEP"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_values": [4]}, "expected_value": 10, "reasoning": "4,5 forms straight of length 2, STEP triggers x2"},
    {"id": "step_no_trigger", "keywords": ["STEP"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_values": [2]}, "expected_value": 5, "reasoning": "2,5 does not form a straight, STEP does not trigger"},
    {"id": "run_triggers", "keywords": ["RUN"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_values": [3, 4]}, "expected_value": 15, "reasoning": "3,4,5 forms straight of length 3, RUN triggers x3"},
    {"id": "sprint_triggers", "keywords": ["SPRINT"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_values": [1, 2, 3, 4]}, "expected_value": 25, "reasoning": "1,2,3,4,5 forms straight of length 5, SPRINT triggers x5"},
    {"id": "inspired_triggers", "keywords": ["INSPIRED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 15}, "expected_value": 20, "reasoning": "previous die (15) was higher than this (10), INSPIRED triggers x2"},
    {"id": "inspired_no_trigger", "keywords": ["INSPIRED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 5}, "expected_value": 10, "reasoning": "previous die (5) was not higher than this (10), INSPIRED does not trigger"},
    {"id": "focus_triggers", "keywords": ["FOCUS"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "id": "monster1"}, "context": {"previous_die_target": "monster1"}, "expected_value": 20, "reasoning": "same target as previous die, FOCUS triggers x2"},
    {"id": "focus_no_trigger", "keywords": ["FOCUS"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "id": "monster1"}, "context": {"previous_die_target": "monster2"}, "expected_value": 10, "reasoning": "different target from previous die, FOCUS does not trigger"},
    {"id": "duel_triggers", "keywords": ["DUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "id": "hero1"}, "target": {"hp": 10, "max_hp": 15, "targeting": "hero1"}, "expected_value": 20, "reasoning": "target is targeting source this turn, DUEL triggers x2"},
    {"id": "duel_no_trigger", "keywords": ["DUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "id": "hero1"}, "target": {"hp": 10, "max_hp": 15, "targeting": "hero2"}, "expected_value": 10, "reasoning": "target is not targeting source, DUEL does not trigger"},
    {"id": "engine_triggers", "keywords": ["ENGINE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "expected_value": 40, "reasoning": "source full hp AND target full hp, ENGINE triggers x4"},
    {"id": "engine_no_trigger", "keywords": ["ENGINE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "source full hp but target not full, ENGINE does not trigger"},
    {"id": "priswish_triggers", "keywords": ["PRISWISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "dying": true}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 40, "reasoning": "source full hp AND dying this turn, PRISWISH triggers x4"},
    {"id": "priswish_no_trigger", "keywords": ["PRISWISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "dying": false}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "source full hp but not dying, PRISWISH does not trigger"},
    {"id": "paxin_triggers_pair", "keywords": ["PAXIN"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 10, "previous_die_keywords": ["CRUEL"]}, "expected_value": 30, "reasoning": "same value as previous (pair), no shared keywords, PAXIN triggers x3"},
    {"id": "paxin_triggers_chain", "keywords": ["PAXIN", "ENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 5, "previous_die_keywords": ["ENGAGE"]}, "expected_value": 30, "reasoning": "different value, shared ENGAGE keyword (chain), PAXIN triggers x3"},
    {"id": "paxin_no_trigger_both", "keywords": ["PAXIN", "ENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 10, "previous_die_keywords": ["ENGAGE"]}, "expected_value": 10, "reasoning": "both pair AND chain satisfied, PAXIN requires XOR so does not trigger"},
    {"id": "underocus_triggers", "keywords": ["UNDEROCUS"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 10, "max_hp": 20}, "target": {"hp": 15, "max_hp": 20, "id": "monster1"}, "context": {"previous_die_target": "monster1"}, "expected_value": 40, "reasoning": "target has more hp (underdog) AND is previous target (focus), UNDEROCUS triggers x4"},
    {"id": "underocus_no_trigger", "keywords": ["UNDEROCUS"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 10, "max_hp": 20}, "target": {"hp": 15, "max_hp": 20, "id": "monster1"}, "context": {"previous_die_target": "monster2"}, "expected_value": 10, "reasoning": "target has more hp but different target, UNDEROCUS does not trigger"},
    {"id": "bloodlust_bonus", "keywords": ["BLOODLUST"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"damaged_enemies": 3}, "expected_value": 13, "reasoning": "3 damaged enemies, BLOODLUST adds +3"},
    {"id": "bloodlust_no_damaged", "keywords": ["BLOODLUST"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"damaged_enemies": 0}, "expected_value": 10, "reasoning": "0 damaged enemies, BLOODLUST adds +0"},
    {"id": "charged_bonus", "keywords": ["CHARGED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "mana": 5}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 15, "reasoning": "5 stored mana, CHARGED adds +5"},
    {"id": "steel_bonus", "keywords": ["STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 14, "reasoning": "4 shields on source, STEEL adds +4"},
    {"id": "flesh_bonus", "keywords": ["FLESH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 7, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 17, "reasoning": "source has 7 hp, FLESH adds +7"},
    {"id": "minusFlesh_penalty", "keywords": ["MINUSFLESH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 7, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 3, "reasoning": "source has 7 hp, MINUSFLESH subtracts -7"},
    {"id": "era_bonus", "keywords": ["ERA"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"elapsed_turns": 4}, "expected_value": 14, "reasoning": "4 elapsed turns, ERA adds +4"},
    {"id": "minusEra_penalty", "keywords": ["MINUSERA"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"elapsed_turns": 4}, "expected_value": 6, "reasoning": "4 elapsed turns, MINUSERA subtracts -4"},
    {"id": "fizz_bonus", "keywords": ["FIZZ"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"abilities_used_this_turn": 3}, "expected_value": 13, "reasoning": "3 abilities used this turn, FIZZ adds +3"},
    {"id": "defy_bonus", "keywords": ["DEFY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "incoming_damage": 5}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 15, "reasoning": "5 incoming damage to source, DEFY adds +5"},
    {"id": "vigil_bonus", "keywords": ["VIGIL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"defeated_allies": 2}, "expected_value": 12, "reasoning": "2 defeated allies, VIGIL adds +2"},
    {"id": "flurry_bonus", "keywords": ["FLURRY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "times_used_this_turn": 2}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 12, "reasoning": "source used 2 times this turn, FLURRY adds +2"},
    {"id": "rainbow_bonus", "keywords": ["RAINBOW", "ENGAGE", "CRUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 13, "reasoning": "3 keywords on side (RAINBOW, ENGAGE, CRUEL), RAINBOW adds +3"},
    {"id": "skill_bonus", "keywords": ["SKILL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "level": 3}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 13, "reasoning": "source level 3, SKILL adds +3"},
    {"id": "hoard_bonus", "keywords": ["HOARD"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"unequipped_items": 4}, "expected_value": 14, "reasoning": "4 unequipped items, HOARD adds +4"},
    {"id": "fashionable_bonus", "keywords": ["FASHIONABLE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "equipped_items_total_tier": 5}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 15, "reasoning": "total tier of equipped items is 5, FASHIONABLE adds +5"},
    {"id": "equipped_bonus", "keywords": ["EQUIPPED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "equipped_items_count": 2}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 12, "reasoning": "2 items equipped, EQUIPPED adds +2"},
    {"id": "buffed_bonus", "keywords": ["BUFFED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "buffs": 3}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 13, "reasoning": "3 buffs on source, BUFFED adds +3"},
    {"id": "affected_bonus", "keywords": ["AFFECTED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "effects_on_me": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 14, "reasoning": "4 things affecting source, AFFECTED adds +4"},
    {"id": "acidic_bonus", "keywords": ["ACIDIC"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "poison": 3}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 13, "reasoning": "3 poison on source, ACIDIC adds +3"},
    {"id": "plague_bonus", "keywords": ["PLAGUE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"total_poison_all_characters": 7}, "expected_value": 17, "reasoning": "7 total poison on all characters, PLAGUE adds +7"},
    {"id": "doubled_modifier", "keywords": ["DOUBLED", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 18, "reasoning": "4 shields, STEEL would add +4, but DOUBLED makes it +8"},
    {"id": "squared_modifier", "keywords": ["SQUARED", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 26, "reasoning": "4 shields, SQUARED makes STEEL add +16 (4^2)"},
    {"id": "onesie_modifier", "keywords": ["ONESIE", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 11, "reasoning": "ONESIE makes colored N = 1, so STEEL adds +1 regardless of shields"},
    {"id": "threesy_modifier", "keywords": ["THREESY", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 13, "reasoning": "THREESY makes colored N = 3, so STEEL adds +3 regardless of shields"},
    {"id": "zeroed_modifier", "keywords": ["ZEROED", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "ZEROED makes colored N = 0, so STEEL adds +0"},
    {"id": "plus_modifier", "keywords": ["PLUS", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 15, "reasoning": "4 shields, PLUS makes STEEL add +(4+1) = +5"},
    {"id": "fault_modifier", "keywords": ["FAULT", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 9, "reasoning": "FAULT makes colored N = -1, so STEEL adds -1"},
    {"id": "treble_modifier", "keywords": ["TREBLE", "ENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "expected_value": 30, "reasoning": "TREBLE makes x2 keywords become x3, ENGAGE triggers x3"},
    {"id": "eliminate_valid", "keywords": ["ELIMINATE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 5, "max_hp": 15}, "context": {"all_enemy_hp": [5, 10, 15]}, "expected_value": 10, "expected_valid_target": true, "reasoning": "target has least hp (5), ELIMINATE allows targeting"},
    {"id": "eliminate_invalid", "keywords": ["ELIMINATE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"all_enemy_hp": [5, 10, 15]}, "expected_value": 0, "expected_valid_target": false, "reasoning": "target does not have least hp, ELIMINATE prevents targeting"},
    {"id": "heavy_valid", "keywords": ["HEAVY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 20}, "context": {"all_enemy_hp": [5, 10, 15]}, "expected_value": 10, "expected_valid_target": true, "reasoning": "target has most hp (15), HEAVY allows targeting"},
    {"id": "heavy_invalid", "keywords": ["HEAVY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"all_enemy_hp": [5, 10, 15]}, "expected_value": 0, "expected_valid_target": false, "reasoning": "target does not have most hp, HEAVY prevents targeting"},
    {"id": "generous_valid", "keywords": ["GENEROUS"], "effect": "HEAL", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "id": "hero1"}, "target": {"hp": 10, "max_hp": 15, "id": "hero2"}, "expected_value": 10, "expected_valid_target": true, "reasoning": "target is not self, GENEROUS allows targeting"},
    {"id": "generous_invalid", "keywords": ["GENEROUS"], "effect": "HEAL", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "id": "hero1"}, "target": "SELF", "expected_value": 0, "expected_valid_target": false, "reasoning": "cannot target self with GENEROUS"},
    {"id": "scared_valid", "keywords": ["SCARED"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 3, "max_hp": 15}, "expected_value": 3, "expected_valid_target": true, "reasoning": "target hp (3) <= N (3), SCARED allows targeting"},
    {"id": "scared_invalid", "keywords": ["SCARED"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 5, "max_hp": 15}, "expected_value": 0, "expected_valid_target": false, "reasoning": "target hp (5) > N (3), SCARED prevents targeting"},
    {"id": "picky_valid", "keywords": ["PICKY"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 5, "max_hp": 15}, "expected_value": 5, "expected_valid_target": true, "reasoning": "target hp (5) == N (5), PICKY allows targeting"},
    {"id": "picky_invalid", "keywords": ["PICKY"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 6, "max_hp": 15}, "expected_value": 0, "expected_valid_target": false, "reasoning": "target hp (6) != N (5), PICKY prevents targeting"},
    {"id": "ranged_backrow", "keywords": ["RANGED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "row": "back"}, "expected_value": 10, "expected_valid_target": true, "reasoning": "RANGED allows targeting back row"},
    {"id": "copycat_basic", "keywords": ["COPYCAT"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "context": {"previous_die_keywords": ["ENGAGE", "CRUEL"]}, "expected_value": 20, "reasoning": "COPYCAT copies ENGAGE from previous die, target at full hp so x2"},
    {"id": "copycat_no_previous", "keywords": ["COPYCAT"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_keywords": null}, "expected_value": 10, "reasoning": "no previous die, COPYCAT copies nothing"},
    {"id": "echo_basic", "keywords": ["ECHO"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": 8}, "expected_value": 8, "reasoning": "ECHO copies pips from previous die (8)"},
    {"id": "echo_no_previous", "keywords": ["ECHO"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_value": null}, "expected_value": 3, "reasoning": "no previous die, ECHO keeps original pips"},
    {"id": "resonate_basic", "keywords": ["RESONATE"], "effect": "HEAL", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_effect": "DAMAGE"}, "expected_effect": "DAMAGE", "expected_value": 5, "reasoning": "RESONATE copies effect type (DAMAGE) but keeps this side's pips (5)"},
    {"id": "dejavu_basic", "keywords": ["DEJAVU"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "context": {"last_turn_keywords": ["ENGAGE"]}, "expected_value": 20, "reasoning": "DEJAVU copies keywords from last turn, ENGAGE triggers x2"},
    {"id": "spy_basic", "keywords": ["SPY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "context": {"first_enemy_attack_keywords": ["ENGAGE", "CRUEL"]}, "expected_value": 20, "reasoning": "SPY copies keywords from first enemy attack, ENGAGE triggers x2"},
    {"id": "poison_effect", "keywords": ["POISON"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 20, "poison": 0}, "expected_damage": 3, "expected_poison_applied": 3, "reasoning": "POISON deals damage AND inflicts 3 poison"},
    {"id": "regen_effect", "keywords": ["REGEN"], "effect": "HEAL", "base_value": 2, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 20, "regen": 0}, "expected_heal": 2, "expected_regen_applied": 2, "reasoning": "REGEN heals AND grants 2 regen"},
    {"id": "weaken_effect", "keywords": ["WEAKEN"], "effect": "DAMAGE", "base_value": 2, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 2, "expected_weaken_applied": 2, "reasoning": "WEAKEN deals damage AND applies -2 to all target sides"},
    {"id": "boost_effect", "keywords": ["BOOST"], "effect": "SHIELD", "base_value": 2, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_shield": 2, "expected_boost_applied": 2, "reasoning": "BOOST grants shield AND applies +2 to all target sides"},
    {"id": "vulnerable_effect", "keywords": ["VULNERABLE"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "vulnerable": 0}, "expected_damage": 3, "expected_vulnerable_applied": 3, "reasoning": "VULNERABLE deals damage AND target takes +3 damage this turn"},
    {"id": "petrify_effect", "keywords": ["PETRIFY"], "effect": "DAMAGE", "base_value": 2, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 2, "expected_sides_petrified": 2, "reasoning": "PETRIFY deals damage AND transforms 2 sides to stone"},
    {"id": "hypnotise_effect", "keywords": ["HYPNOTISE"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_target_damage_sides_zeroed": true, "reasoning": "HYPNOTISE deals damage AND sets target damage sides to 0"},
    {"id": "cleanse_effect", "keywords": ["CLEANSE"], "effect": "HEAL", "base_value": 2, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "poison": 3, "weaken": 2}, "expected_heal": 2, "expected_negative_effects_cleansed": 2, "reasoning": "CLEANSE heals AND removes 2 stacks of negative effects"},
    {"id": "dispel_effect", "keywords": ["DISPEL"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "traits": ["armored", "flying"]}, "expected_damage": 5, "expected_traits_removed": true, "reasoning": "DISPEL deals damage AND removes all traits from target"},
    {"id": "vitality_effect", "keywords": ["VITALITY"], "effect": "HEAL", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_heal": 3, "expected_max_hp_increase": 3, "reasoning": "VITALITY heals AND grants +3 max hp"},
    {"id": "wither_effect", "keywords": ["WITHER"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 3, "expected_max_hp_decrease": 3, "reasoning": "WITHER deals damage AND reduces target max hp by 3"},
    {"id": "selfShield_effect", "keywords": ["SELFSHIELD"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20, "shields": 0}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_to_target": 3, "expected_shield_to_source": 3, "reasoning": "SELFSHIELD deals damage to target AND shields source for 3"},
    {"id": "selfHeal_effect", "keywords": ["SELFHEAL"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 15, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_to_target": 3, "expected_heal_to_source": 3, "reasoning": "SELFHEAL deals damage to target AND heals source for 3"},
    {"id": "selfPoison_effect", "keywords": ["SELFPOISON"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20, "poison": 0}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_to_target": 3, "expected_poison_to_source": 3, "reasoning": "SELFPOISON deals damage to target AND poisons source for 3"},
    {"id": "selfRegen_effect", "keywords": ["SELFREGEN"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20, "regen": 0}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_to_target": 3, "expected_regen_to_source": 3, "reasoning": "SELFREGEN deals damage AND applies regen to source"},
    {"id": "selfPetrify_effect", "keywords": ["SELFPETRIFY"], "effect": "DAMAGE", "base_value": 2, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_to_target": 2, "expected_petrify_to_source": 2, "reasoning": "SELFPETRIFY deals damage AND petrifies 2 of source sides"},
    {"id": "selfCleanse_effect", "keywords": ["SELFCLEANSE"], "effect": "DAMAGE", "base_value": 2, "source": {"hp": 20, "max_hp": 20, "poison": 3}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_to_target": 2, "expected_cleanse_to_source": 2, "reasoning": "SELFCLEANSE deals damage AND cleanses 2 from source"},
    {"id": "selfVulnerable_effect", "keywords": ["SELFVULNERABLE"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_to_target": 3, "expected_vulnerable_to_source": 3, "reasoning": "SELFVULNERABLE deals damage AND makes source take +3 damage"},
    {"id": "selfRepel_effect", "keywords": ["SELFREPEL"], "effect": "SHIELD", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"enemies_attacking_source": 2}, "expected_shield_to_target": 3, "expected_damage_to_attackers": 3, "reasoning": "SELFREPEL shields target AND deals 3 damage to enemies attacking source"},
    {"id": "repel_effect", "keywords": ["REPEL"], "effect": "SHIELD", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"enemies_attacking_target": 2}, "expected_shield_to_target": 3, "expected_damage_to_attackers": 3, "reasoning": "REPEL shields target AND deals 3 damage to enemies attacking target"},
    {"id": "growth_effect", "keywords": ["GROWTH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_side_growth": 1, "reasoning": "GROWTH deals damage AND this side gets +1 permanently after use"},
    {"id": "hyperGrowth_effect", "keywords": ["HYPERGROWTH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_side_growth": 5, "reasoning": "HYPERGROWTH deals damage AND this side gets +N (5) permanently"},
    {"id": "undergrowth_effect", "keywords": ["UNDERGROWTH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_opposite_side_growth": 1, "reasoning": "UNDERGROWTH deals damage AND opposite side gets +1 permanently"},
    {"id": "groooooowth_effect", "keywords": ["GROOOOOOWTH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_all_sides_growth": 1, "reasoning": "GROOOOOOWTH deals damage AND ALL source sides get +1 permanently"},
    {"id": "decay_effect", "keywords": ["DECAY"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_side_decay": -1, "reasoning": "DECAY deals damage AND this side gets -1 permanently after use"},
    {"id": "doubleGrowth_effect", "keywords": ["DOUBLEGROWTH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_side_growth": 2, "reasoning": "DOUBLEGROWTH deals damage AND this side gets +2 permanently"},
    {"id": "singleUse_effect", "keywords": ["SINGLEUSE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 10, "expected_side_becomes_blank": true, "reasoning": "SINGLEUSE deals damage AND this side becomes blank after"},
    {"id": "doubleUse_effect", "keywords": ["DOUBLEUSE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 10, "expected_uses_allowed": 2, "reasoning": "DOUBLEUSE can be used twice in a turn"},
    {"id": "quadUse_effect", "keywords": ["QUADUSE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 10, "expected_uses_allowed": 4, "reasoning": "QUADUSE can be used 4 times in a turn"},
    {"id": "hyperUse_effect", "keywords": ["HYPERUSE"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 3, "expected_uses_allowed": 3, "reasoning": "HYPERUSE can be used N (3) times in a turn"},
    {"id": "exert_effect", "keywords": ["EXERT"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 10, "expected_source_exerted": true, "reasoning": "EXERT deals damage AND all source sides become blank until end of next turn"},
    {"id": "manaGain_effect", "keywords": ["MANAGAIN"], "effect": "DAMAGE", "base_value": 2, "source": {"hp": 20, "max_hp": 20, "mana": 0}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 2, "expected_mana_gain": 2, "reasoning": "MANAGAIN deals damage AND source gains 2 mana"},
    {"id": "manacost_requirement", "keywords": ["MANACOST"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20, "mana": 3}, "target": {"hp": 10, "max_hp": 15}, "expected_mana_cost": 3, "reasoning": "MANACOST requires 3 mana to use"},
    {"id": "rampage_triggers", "keywords": ["RAMPAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 5, "max_hp": 15}, "expected_damage": 10, "expected_reusable_if_lethal": true, "reasoning": "RAMPAGE can be reused if the attack is lethal"},
    {"id": "rescue_triggers", "keywords": ["RESCUE"], "effect": "HEAL", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 1, "max_hp": 15, "dying": true}, "expected_heal": 5, "expected_reusable_if_saves": true, "reasoning": "RESCUE can be reused if it saves a hero from dying"},
    {"id": "guilt_effect", "keywords": ["GUILT"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 5, "max_hp": 15}, "expected_damage": 10, "expected_source_dies_if_lethal": true, "reasoning": "GUILT: if this attack is lethal, source dies"},
    {"id": "evil_effect", "keywords": ["EVIL"], "effect": "HEAL", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 1, "max_hp": 15, "dying": true}, "expected_heal": 5, "expected_source_dies_if_saves": true, "reasoning": "EVIL: if this heal saves a hero, source dies"},
    {"id": "death_effect", "keywords": ["DEATH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 10, "expected_source_dies": true, "reasoning": "DEATH: source dies after using this"},
    {"id": "pain_effect", "keywords": ["PAIN"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_to_target": 3, "expected_damage_to_source": 3, "reasoning": "PAIN: source takes N (3) damage"},
    {"id": "fierce_flees", "keywords": ["FIERCE"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 5, "max_hp": 15}, "expected_damage": 5, "expected_target_flees": true, "reasoning": "FIERCE: target flees if they have N (5) or less hp"},
    {"id": "fierce_no_flee", "keywords": ["FIERCE"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 6, "max_hp": 15}, "expected_damage": 5, "expected_target_flees": false, "reasoning": "FIERCE: target has 6 hp > N (5), does not flee"},
    {"id": "lead_effect", "keywords": ["LEAD"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 3, "expected_ally_damage_sides_bonus": 3, "reasoning": "LEAD: after use, other heroes damage sides get +N (3) this turn"},
    {"id": "smith_effect", "keywords": ["SMITH"], "effect": "SHIELD", "base_value": 2, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_shield": 2, "expected_target_damage_shield_bonus": 2, "reasoning": "SMITH: target gets +N (2) to damage and shield sides this turn"},
    {"id": "permaBoost_effect", "keywords": ["PERMABOOST"], "effect": "HEAL", "base_value": 2, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_heal": 2, "expected_target_all_sides_bonus_permanent": 2, "reasoning": "PERMABOOST: target gets +N (2) to all sides this fight"},
    {"id": "swapEngage_triggers", "keywords": ["SWAPENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "source at full hp, SWAPENGAGE triggers x2"},
    {"id": "swapEngage_no_trigger", "keywords": ["SWAPENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 15, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "expected_value": 10, "reasoning": "source not at full hp, SWAPENGAGE does not trigger"},
    {"id": "swapCruel_triggers", "keywords": ["SWAPCRUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 10, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "expected_value": 20, "reasoning": "source at half hp or less, SWAPCRUEL triggers x2"},
    {"id": "swapDeathwish_triggers", "keywords": ["SWAPDEATHWISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "dying": true}, "expected_value": 20, "reasoning": "target is dying this turn, SWAPDEATHWISH triggers x2"},
    {"id": "swapTerminal_triggers", "keywords": ["SWAPTERMINAL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 1, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 20, "reasoning": "source at 1 hp, SWAPTERMINAL triggers x2"},
    {"id": "halveEngage_triggers", "keywords": ["HALVEENGAGE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "expected_value": 5, "reasoning": "target at full hp, HALVEENGAGE triggers x0.5"},
    {"id": "halveDeathwish_triggers", "keywords": ["HALVEDEATHWISH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 1, "max_hp": 20, "dying": true}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 5, "reasoning": "source dying, HALVEDEATHWISH triggers x0.5"},
    {"id": "halveDuel_triggers", "keywords": ["HALVEDUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "id": "hero1"}, "target": {"hp": 10, "max_hp": 15, "targeting": "hero1"}, "expected_value": 5, "reasoning": "target is targeting source, HALVEDUEL triggers x0.5"},
    {"id": "engarged_triggers", "keywords": ["ENGARGED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "mana": 4}, "target": {"hp": 15, "max_hp": 15}, "expected_value": 14, "reasoning": "target full hp triggers engage condition, ENGARGED adds +mana (4)"},
    {"id": "engarged_no_trigger", "keywords": ["ENGARGED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "mana": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 10, "reasoning": "target not full hp, ENGARGED condition not met"},
    {"id": "cruesh_triggers", "keywords": ["CRUESH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 7, "max_hp": 20}, "target": {"hp": 5, "max_hp": 10}, "expected_value": 17, "reasoning": "target at half hp triggers cruel condition, CRUESH adds +source hp (7)"},
    {"id": "pristeel_triggers", "keywords": ["PRISTEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 14, "reasoning": "source full hp triggers pristine condition, PRISTEEL adds +shields (4)"},
    {"id": "deathlust_triggers", "keywords": ["DEATHLUST"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 1, "max_hp": 20, "dying": true}, "target": {"hp": 10, "max_hp": 15}, "context": {"damaged_enemies": 3}, "expected_value": 13, "reasoning": "source dying triggers deathwish condition, DEATHLUST adds +damaged enemies (3)"},
    {"id": "trill_triggers", "keywords": ["TRILL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "level": 3}, "target": {"hp": 10, "max_hp": 15}, "context": {"previous_die_values": [10, 10]}, "expected_value": 13, "reasoning": "trio condition met (3 matching dice), TRILL adds +level (3)"},
    {"id": "duegue_triggers", "keywords": ["DUEGUE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "id": "hero1"}, "target": {"hp": 10, "max_hp": 15, "targeting": "hero1"}, "context": {"total_poison_all_characters": 5}, "expected_value": 15, "reasoning": "duel condition met, DUEGUE adds +total poison (5)"},
    {"id": "boned_effect", "keywords": ["BONED"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_bones_summoned": 1, "reasoning": "BONED summons 1 bones ally"},
    {"id": "hyperBoned_effect", "keywords": ["HYPERBONED"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 3, "expected_bones_summoned": 3, "reasoning": "HYPERBONED summons N (3) bones allies"},
    {"id": "groupGrowth_effect", "keywords": ["GROUPGROWTH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"ally_count": 3}, "expected_damage": 5, "expected_all_allies_same_side_growth": 1, "reasoning": "GROUPGROWTH: this side index gets +1 for source AND all allies"},
    {"id": "groupDecay_effect", "keywords": ["GROUPDECAY"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"ally_count": 3}, "expected_damage": 5, "expected_all_allies_same_side_decay": -1, "reasoning": "GROUPDECAY: this side index gets -1 for source AND all allies"},
    {"id": "groupSingleUse_effect", "keywords": ["GROUPSINGLEUSE"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"ally_count": 3}, "expected_damage": 5, "expected_all_allies_same_side_blank": true, "reasoning": "GROUPSINGLEUSE: this side index becomes blank for source AND all allies"},
    {"id": "groupExert_effect", "keywords": ["GROUPEXERT"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"ally_count": 3}, "expected_damage": 5, "expected_all_allies_exerted": true, "reasoning": "GROUPEXERT: source AND all allies become exerted"},
    {"id": "groupGroooooowth_effect", "keywords": ["GROUPGROOOOOOWTH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"ally_count": 3}, "expected_damage": 5, "expected_all_allies_all_sides_growth": 1, "reasoning": "GROUPGROOOOOOWTH: ALL sides get +1 for source AND all allies"},
    {"id": "rite_bonus", "keywords": ["RITE"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"unused_allies": 3}, "expected_value": 8, "expected_allies_become_used": true, "reasoning": "RITE: +1 for each unused ally (3), and they become used"},
    {"id": "cleave_effect", "keywords": ["CLEAVE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "position": 2}, "context": {"adjacent_enemies": 2}, "expected_damage_to_main": 10, "expected_damage_to_adjacent": 10, "reasoning": "CLEAVE hits main target and both adjacent enemies"},
    {"id": "descend_effect", "keywords": ["DESCEND"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15, "position": 1}, "context": {"enemy_below": true}, "expected_damage_to_main": 10, "expected_damage_to_below": 10, "reasoning": "DESCEND hits main target and enemy below"},
    {"id": "share_effect", "keywords": ["SHARE", "ENGAGE", "CRUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 10, "expected_target_gains_keywords": ["ENGAGE", "CRUEL"], "reasoning": "SHARE gives target all source keywords except SHARE"},
    {"id": "annul_effect", "keywords": ["ANNUL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 10, "expected_target_loses_keywords": true, "reasoning": "ANNUL removes all keywords from target this turn"},
    {"id": "duplicate_effect", "keywords": ["DUPLICATE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"allied_dice_count": 3}, "expected_damage": 10, "expected_copies_to_allies": 3, "reasoning": "DUPLICATE copies this side onto all allied dice this turn"},
    {"id": "shifter_effect", "keywords": ["SHIFTER"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_random_extra_keyword": true, "reasoning": "SHIFTER: has random extra keyword, changes each turn"},
    {"id": "lucky_effect", "keywords": ["LUCKY"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_min": 0, "expected_damage_max": 10, "reasoning": "LUCKY: pips randomised 0 to current"},
    {"id": "critical_effect", "keywords": ["CRITICAL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_options": [10, 11], "reasoning": "CRITICAL: 50% chance for +1"},
    {"id": "fluctuate_effect", "keywords": ["FLUCTUATE"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_side_changes_randomly": true, "reasoning": "FLUCTUATE: changes to random side each turn"},
    {"id": "fumble_effect", "keywords": ["FUMBLE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_options": [0, 10], "reasoning": "FUMBLE: 50% chance to be blank"},
    {"id": "stasis_negates_growth", "keywords": ["STASIS", "GROWTH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_side_unchanged": true, "reasoning": "STASIS: side cannot change, GROWTH negated"},
    {"id": "sticky_effect", "keywords": ["STICKY"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_cannot_reroll": true, "reasoning": "STICKY: cannot be rerolled"},
    {"id": "cantrip_effect", "keywords": ["CANTRIP"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 3, "expected_activates_during_roll": true, "reasoning": "CANTRIP: activates during rolling if face-up"},
    {"id": "dogma_effect", "keywords": ["DOGMA"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_only_pips_change_on_replace": true, "reasoning": "DOGMA: only pips change when replaced"},
    {"id": "resilient_effect", "keywords": ["RESILIENT"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_pips_remain_on_replace": true, "reasoning": "RESILIENT: pips remain when replaced"},
    {"id": "enduring_effect", "keywords": ["ENDURING", "ENGAGE"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_keywords_remain_on_replace": true, "reasoning": "ENDURING: keywords remain when changed"},
    {"id": "unusable_effect", "keywords": ["UNUSABLE"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_cannot_use_manually": true, "reasoning": "UNUSABLE: cannot be used manually"},
    {"id": "mandatory_effect", "keywords": ["MANDATORY"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_must_use": true, "reasoning": "MANDATORY: must be used if possible"},
    {"id": "nothing_effect", "keywords": ["NOTHING"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "reasoning": "NOTHING: no additional effect"},
    {"id": "heal_basic", "keywords": [], "effect": "HEAL", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 20}, "expected_heal": 5, "reasoning": "HEAL: heals target for N"},
    {"id": "shield_basic", "keywords": [], "effect": "SHIELD", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 20, "shields": 0}, "expected_shield": 5, "reasoning": "SHIELD: shields target for N"},
    {"id": "damage_basic", "keywords": [], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 20}, "expected_damage": 5, "reasoning": "DAMAGE: damages target for N"},
    {"id": "singleCast_effect", "keywords": ["SINGLECAST"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 10, "expected_once_per_fight": true, "reasoning": "SINGLECAST: can only be cast once each fight"},
    {"id": "cooldown_effect", "keywords": ["COOLDOWN"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 10, "expected_once_per_turn": true, "reasoning": "COOLDOWN: can only be cast once each turn"},
    {"id": "channel_effect", "keywords": ["CHANNEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "mana": 5}, "target": {"hp": 10, "max_hp": 15}, "context": {"times_cast": 2, "base_mana_cost": 3}, "expected_mana_cost": 1, "reasoning": "CHANNEL: costs -1 mana each cast (min 1)"},
    {"id": "deplete_effect", "keywords": ["DEPLETE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "mana": 5}, "target": {"hp": 10, "max_hp": 15}, "context": {"times_cast": 2, "base_mana_cost": 1}, "expected_mana_cost": 3, "reasoning": "DEPLETE: costs +1 mana each cast"},
    {"id": "future_effect", "keywords": ["FUTURE"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage_now": 0, "expected_damage_next_turn": 10, "reasoning": "FUTURE: effect delayed until next turn"},
    {"id": "spellRescue_effect", "keywords": ["SPELLRESCUE"], "effect": "HEAL", "base_value": 5, "source": {"hp": 20, "max_hp": 20, "mana": 3}, "target": {"hp": 1, "max_hp": 15, "dying": true}, "context": {"spell_mana_cost": 3}, "expected_heal": 5, "expected_mana_refunded": 3, "reasoning": "SPELLRESCUE: mana refunded if saves hero"},
    {"id": "tactical_effect", "keywords": ["TACTICAL"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_tactic_cost_contribution": 2, "reasoning": "TACTICAL: counts twice for tactic costs"},
    {"id": "inflictBoned_effect", "keywords": ["INFLICTBONED"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_inflicted_keyword": "BONED", "reasoning": "INFLICTBONED: adds boned to target sides for a turn"},
    {"id": "inflictDeath_effect", "keywords": ["INFLICTDEATH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_inflicted_keyword": "DEATH", "reasoning": "INFLICTDEATH: adds death to target sides for a turn"},
    {"id": "inflictExert_effect", "keywords": ["INFLICTEXERT"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_inflicted_keyword": "EXERT", "reasoning": "INFLICTEXERT: adds exert to target sides for a turn"},
    {"id": "inflictPain_effect", "keywords": ["INFLICTPAIN"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_inflicted_keyword": "PAIN", "reasoning": "INFLICTPAIN: adds pain to target sides for a turn"},
    {"id": "inflictSingleUse_effect", "keywords": ["INFLICTSINGLEUSE"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_inflicted_keyword": "SINGLEUSE", "reasoning": "INFLICTSINGLEUSE: adds singleUse to target sides for a turn"},
    {"id": "inflictNothing_effect", "keywords": ["INFLICTNOTHING"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_inflicted_keyword": "NOTHING", "reasoning": "INFLICTNOTHING: adds nothing to target sides for a turn"},
    {"id": "inflictSelfShield_effect", "keywords": ["INFLICTSELFSHIELD"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_inflicted_keyword": "SELFSHIELD", "reasoning": "INFLICTSELFSHIELD: adds selfShield to target sides for a turn"},
    {"id": "inflictInflictNothing_effect", "keywords": ["INFLICTINFLICTNOTHING"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_inflicted_keyword": "INFLICTNOTHING", "reasoning": "INFLICTINFLICTNOTHING: adds inflictNothing to target sides"},
    {"id": "inflictInflictDeath_effect", "keywords": ["INFLICTINFLICTDEATH"], "effect": "DAMAGE", "base_value": 5, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_damage": 5, "expected_inflicted_keyword": "INFLICTDEATH", "reasoning": "INFLICTINFLICTDEATH: adds inflictDeath to target sides"},
    {"id": "engage_cruel_combo", "keywords": ["ENGAGE", "CRUEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 5, "max_hp": 5}, "expected_value": 40, "reasoning": "target full hp (5/5) AND at 50%, both ENGAGE x2 * CRUEL x2 = x4"},
    {"id": "bloodlust_steel_combo", "keywords": ["BLOODLUST", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 3}, "target": {"hp": 10, "max_hp": 15}, "context": {"damaged_enemies": 2}, "expected_value": 15, "reasoning": "BLOODLUST +2, STEEL +3, total = 10 + 2 + 3 = 15"},
    {"id": "echo_engage_combo", "keywords": ["ECHO", "ENGAGE"], "effect": "DAMAGE", "base_value": 3, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 15, "max_hp": 15}, "context": {"previous_die_value": 8}, "expected_value": 16, "reasoning": "ECHO copies pips (8), ENGAGE x2 = 16"},
    {"id": "doubDiff_with_steel", "keywords": ["DOUBDIFF", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 18, "reasoning": "STEEL normally +4, DOUBDIFF doubles pip delta to +8"},
    {"id": "doubDiff_with_bloodlust", "keywords": ["DOUBDIFF", "BLOODLUST"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"damaged_enemies": 3}, "expected_value": 16, "reasoning": "BLOODLUST normally +3, DOUBDIFF doubles pip delta to +6"},
    {"id": "doubDiff_with_minusFlesh", "keywords": ["DOUBDIFF", "MINUSFLESH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 3, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 4, "reasoning": "MINUSFLESH normally -3, DOUBDIFF doubles pip delta to -6"},
    {"id": "revDiff_with_steel", "keywords": ["REVDIFF", "STEEL"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "shields": 4}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 6, "reasoning": "STEEL normally +4, REVDIFF inverts pip delta to -4"},
    {"id": "revDiff_with_bloodlust", "keywords": ["REVDIFF", "BLOODLUST"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "context": {"damaged_enemies": 3}, "expected_value": 7, "reasoning": "BLOODLUST normally +3, REVDIFF inverts pip delta to -3"},
    {"id": "revDiff_with_minusFlesh", "keywords": ["REVDIFF", "MINUSFLESH"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 3, "max_hp": 20}, "target": {"hp": 10, "max_hp": 15}, "expected_value": 13, "reasoning": "MINUSFLESH normally -3, REVDIFF inverts pip delta to +3"},
    {"id": "possessed_damage", "keywords": ["POSSESSED"], "effect": "DAMAGE", "base_value": 10, "source": {"hp": 20, "max_hp": 20, "team": "HERO"}, "target": {"hp": 10, "max_hp": 15, "team": "MONSTER"}, "expected_targets_as_enemy": true, "reasoning": "POSSESSED: hero's damage side targets as if used by monster (targets allies)"},
    {"id": "possessed_heal", "keywords": ["POSSESSED"], "effect": "HEAL", "base_value": 5, "source": {"hp": 15, "max_hp": 20, "team": "HERO"}, "target": {"hp": 10, "max_hp": 15, "team": "MONSTER"}, "expected_targets_as_enemy": true, "reasoning": "POSSESSED: hero's heal side targets as if used by monster (heals enemies)"}
  ]
}
